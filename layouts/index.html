{{ define "featured" -}}
    {{- partial "home/featured.html" . -}}
{{ end -}}

{{ define "main" -}}
    {{ $page := . -}}
    {{ range $index, $section := site.Params.mainSections -}}
        {{ $pages := where site.RegularPages "Type" "in" $section -}}
        {{ $sectionURL := "" -}}
        {{ range $page := first 1 $pages -}}
            {{ $sectionURL = $page.Parent.RelPermalink -}}
        {{ end -}}

        <div class="container-fluid flex-fill p-0">
            {{ $items := $pages.ByDate.Reverse -}}
            {{ $title := (T (printf "recent%s" (strings.FirstUpper $section))) -}}
            {{ $max := 3 -}}
            {{ $moreTitle := (T (printf "more%s" (strings.FirstUpper $section))) -}}

            {{ if (modBool $index 2) -}}
                {{- partial "assets/card-group.html" (dict 
                    "page" $page
                    "list" $items
                    "max" $max
                    "cols" 3
                    "title" $title
                    "href" $sectionURL
                    "hrefTitle" $moreTitle
                    "class" "border-0"
                    "orientation" "stacked"
                    "padding" "0"
                    "header" "full"
                    "footer" "none"
                    ) 
                -}}
            {{ else -}}
                {{- partial "assets/card-group.html" (dict 
                    "page" $page
                    "list" $items
                    "max" $max
                    "cols" 1
                    "title" $title
                    "href" $sectionURL
                    "hrefTitle" $moreTitle
                    "class" "border-1 card-emphasize"
                    "padding" "3"
                    "header" "none"
                    "footer" "tags"
                    "orientation" "none"
                    )
                -}}
            {{ end -}}
        </div>
    {{ end -}}
{{ end -}}