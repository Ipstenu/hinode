<!-- 
    Copyright Â© 2023 The Hinode Team / Mark Dumay. All rights reserved.
    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.
    Visit gethinode.com/license for more details.
-->

{{ $error := false }}

<!-- Validate arguments -->
{{ if partial "utilities/IsInvalidArgs.html" (dict "structure" "table" "args" .Params) }}
    {{ errorf "Invalid arguments: %s" .Position -}}
    {{ $error = true }}
{{ end }}

<!-- Initialize arguments -->
{{- $responsiveVals := slice "none" "sm" "md" "lg" "xl" "xxl" -}}
{{- $responsive := intersect .Params $responsiveVals -}}
{{- $main := complement $responsive .Params -}}

{{- if in $responsive "none" -}}
    {{- $responsive = slice -}}
{{- else if not $responsive -}}
    {{ $responsive = slice -}}
{{- end -}}

<!-- Main code -->
{{- $input := .Inner | .Page.RenderString }}
{{- $input = replace $input "style=\"text-align:left\"" "class=\"text-start\"" -}}
{{- $input = replace $input "style=\"text-align:center\"" "class=\"text-center\"" -}}
{{- $input = replace $input "style=\"text-align:right\"" "class=\"text-end\"" -}}
{{- $class := delimit $main " " -}}
{{- $old := "<table>" -}}
{{- $new := printf "<table class=\"table %s\">" $class -}}
{{ $input := replace $input $old $new -}}
{{ $attr := "" }}
{{ range $responsive }}
    {{ $attr = printf "%s table-responsive-%s" $attr . }}
{{ end }}

{{- if $responsive }}<div class="table-responsive {{ trim $attr " " }}">{{ end -}}
{{ $input | safeHTML }}
{{- if $responsive }}</div>{{ end -}}